{"version":3,"sources":["dragIndex/dragindex.css","dragIndex/dragIndex.js","serviceWorker.js","index.js"],"names":["module","exports","dragIndex","props","state","isMobile","nodes","name","imgUrl","edges","source","target","relation","value","this","initArgu","window","navigator","userAgent","match","setState","console","log","svg","d3","call","scaleExtent","on","transform","k","x","width","y","height","g","attr","svgDom","ReactDOM","findDOMNode","document","getElementById","clientWidth","clientHeight","append","forceSimulation","force","strength","alphaDecay","links","d","gs","panel","i","lineWidth","Math","sqrt","angle","floor","acos","PI","panelText","asin","distance","defs","selectAll","data","enter","active","alphaTarget","restart","fx","fy","text","style","className","Css","ref","id","React","Component","Boolean","location","hostname","render","Fragment","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.a0a45b0f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"main\",\"mobile\":\"mobile\"};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Css from './dragindex.css';\nimport * as d3 from 'd3';\n\n\nexport default class dragIndex extends React.Component {\n\n  constructor(props){\n    super();\n    this.state={\n          isMobile:false,\n          nodes : [//节点集\n            {name:\"江户川柯南\",imgUrl:'http://img.qqzhi.com/uploads/2018-12-03/014958552.jpg'},\n            {name:\"工藤新一\",imgUrl:'https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2561355949,369093416&fm=26&gp=0.jpg'},\n            {name:\"毛利兰\",imgUrl:'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1591025229382&di=5d27e951ae8c32889e4126d2257c9dfd&imgtype=0&src=http%3A%2F%2Fe.hiphotos.baidu.com%2Fzhidao%2Fpic%2Fitem%2Fb812c8fcc3cec3fd980ff5afd688d43f87942732.jpg'},\n            {name:\"毛利小五郎\",imgUrl:'http://5b0988e595225.cdn.sohucs.com/images/20190604/530ec9b5547544c5b1034a9086193ff1.jpeg'},\n            {name:\"目暮十三\",imgUrl:'http://p2.qhimg.com/t010eeb1666d352e3ff.jpg'},\n            {name:\"小岛元太\",imgUrl:'https://img5.51tietu.net/pic/2019-082115/jp0k3gtwq2vjp0k3gtwq2v.jpg'},\n            {name:\"圆谷光彦\",imgUrl:'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1590925545757&di=982e8440f7f704588f9c097593023c9a&imgtype=0&src=http%3A%2F%2Fimgsrc.baidu.com%2Fbaike%2Fpic%2Fitem%2Fcebd0017806f5a224b90a736.jpg'},\n            {name:\"吉田步美\",imgUrl:'http://imgsrc.baidu.com/forum/w=580;cp=tieba,10,403;ap=%BC%AA%CC%EF%B2%BD%C3%C0%B0%C9,90,411/sign=d947df23cf5c1038247ececa822af063/e8175082b2b7d0a23ce3dba4c2ef76094b369a80.jpg'},\n            {name:\"阿笠博士\",imgUrl:'http://img.diudou.com/file/juqingjieshao/dongman/2017-08-09/79c9e5c1fecbe50c3f9257dcae28c3fb.jpg'},\n            {name:\"灰原哀\",imgUrl:'http://n.sinaimg.cn/sinacn/w640h409/20180101/b55a-fyqefvw7401167.jpg'},\n            {name:\"服部平次\",imgUrl:'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1591025191742&di=4a7e54bec00dec22847a29695479625c&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201611%2F08%2F20161108124224_3Ctwa.jpeg'}],\n          edges : [//边集\n            {source:0,target:1,relation:\"同一人物\",value:0.8},\n            {source:0,target:2,relation:\"关心\",value:0.9},\n            {source:0,target:3,relation:\"寄住/扎他\",value:1},    \t\t\n            {source:0,target:4,relation:\"协助\",value:1.5},    \t\t\n            {source:0,target:5,relation:\"少年侦探团\",value:0.9},    \t\t\n            {source:0,target:6,relation:\"少年侦探团\",value:1.3},    \t\t\n            {source:0,target:7,relation:\"少年侦探团\",value:1.2},    \t\t\n            {source:0,target:8,relation:\"邻居/好友\",value:1.4},    \t\t\n            {source:0,target:9,relation:\"APTX4869\",value:1.2},    \t\t\n            {source:0,target:10,relation:\"对手/朋友\",value:1.5},\n            {source:1,target:2,relation:\"青梅竹马\",value:0.6},    \t\t\n            {source:2,target:3,relation:\"父女\",value:0.7},    \t\t\n            {source:3,target:4,relation:\"搭档\",value:0.7},\n            {source:5,target:6,relation:\"搭档\",value:0.75}, \n            {source:6,target:7,relation:\"搭档\",value:0.7}, \n            {source:9,target:8,relation:\"寄住\",value:0.7}, \n          ]\n    }\n\n\n\n  }\n  componentDidMount(){\n    this.isMobile();\n    this.initArgu();\n    \n  }\n\n  //判断设备是否为移动端或PC端，更改壁纸\n  // 判断浏览器函数\n  isMobile(){\n    // 移动端\n    if(window.navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)) {\n      this.setState({isMobile:true})\n    \n    }else{// PC端\n      console.log('PC')\n    }\n}\n\n\n  //创建参数与svg\n  initArgu(){\n\n    /* const marge = {top:50,bottom:60,left:40,right:60} */\n    const svg = d3.select('svg')\n        .call(d3.zoom() //创建缩放行为\n        .scaleExtent([0, 2])\n        .on('zoom',zoom_actions)); //设置缩放范围\n    const svgDom= ReactDOM.findDOMNode(document.getElementById('svg'))\n    const {clientWidth,clientHeight}= svgDom\n    const width = clientWidth\n    const height = clientHeight\n    \n    const g = svg.append('g')\n          .attr('width',width)\n          .attr('height',height)\n\n        /* .attr(\"transform\",\"translate(\"+marge.top+\",\"+marge.left+\")\"); */\n    \n    /* //模拟数据\n    const nodes = [//节点集\n        {name:\"江户川柯南\",imgUrl:'http://img.qqzhi.com/uploads/2018-12-03/014958552.jpg'},\n        {name:\"工藤新一\",imgUrl:'https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2561355949,369093416&fm=26&gp=0.jpg'},\n        {name:\"毛利兰\",imgUrl:'http://img4.imgtn.bdimg.com/it/u=965431289,2622556019&fm=26&gp=0.jpg'},\n        {name:\"毛利小五郎\",imgUrl:'http://5b0988e595225.cdn.sohucs.com/images/20190604/530ec9b5547544c5b1034a9086193ff1.jpeg'},\n        {name:\"目暮十三\",imgUrl:'http://p2.qhimg.com/t010eeb1666d352e3ff.jpg'},\n        {name:\"小岛元太\",imgUrl:'https://img5.51tietu.net/pic/2019-082115/jp0k3gtwq2vjp0k3gtwq2v.jpg'},\n        {name:\"圆谷光彦\",imgUrl:'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1590925545757&di=982e8440f7f704588f9c097593023c9a&imgtype=0&src=http%3A%2F%2Fimgsrc.baidu.com%2Fbaike%2Fpic%2Fitem%2Fcebd0017806f5a224b90a736.jpg'},\n        {name:\"吉田步美\",imgUrl:'http://imgsrc.baidu.com/forum/w=580;cp=tieba,10,403;ap=%BC%AA%CC%EF%B2%BD%C3%C0%B0%C9,90,411/sign=d947df23cf5c1038247ececa822af063/e8175082b2b7d0a23ce3dba4c2ef76094b369a80.jpg'},\n        {name:\"阿笠博士\",imgUrl:'http://img.diudou.com/file/juqingjieshao/dongman/2017-08-09/79c9e5c1fecbe50c3f9257dcae28c3fb.jpg'},\n        {name:\"灰原哀\",imgUrl:'http://n.sinaimg.cn/sinacn/w640h409/20180101/b55a-fyqefvw7401167.jpg'},\n        {name:\"服部平次\",imgUrl:'https://b-ssl.duitang.com/uploads/item/201611/08/20161108124224_3Ctwa.jpeg'}];\n\n\n    const edges = [//边集\n      {source:0,target:1,relation:\"同一人物\",value:0.8},\n      {source:0,target:2,relation:\"关心\",value:0.9},\n      {source:0,target:3,relation:\"寄住/扎他\",value:1},    \t\t\n      {source:0,target:4,relation:\"协助\",value:1.5},    \t\t\n      {source:0,target:5,relation:\"少年侦探团\",value:0.9},    \t\t\n      {source:0,target:6,relation:\"少年侦探团\",value:1.3},    \t\t\n      {source:0,target:7,relation:\"少年侦探团\",value:1.2},    \t\t\n      {source:0,target:8,relation:\"邻居/好友\",value:1.4},    \t\t\n      {source:0,target:9,relation:\"APTX4869\",value:1.2},    \t\t\n      {source:0,target:10,relation:\"对手/朋友\",value:1.5},\n      {source:1,target:2,relation:\"青梅竹马\",value:0.6},    \t\t\n      {source:2,target:3,relation:\"父女\",value:0.7},    \t\t\n      {source:3,target:4,relation:\"搭档\",value:0.7},\n      {source:5,target:6,relation:\"搭档\",value:0.75}, \n      {source:6,target:7,relation:\"搭档\",value:0.7}, \n      {source:9,target:8,relation:\"寄住\",value:0.7}, \n    ]\n */\n\n    //新建一个d3力导向图\n    const forceSimulation = d3.forceSimulation()\n        .force(\"link\",d3.forceLink())//设置连线\n        .force(\"charge\",d3.forceManyBody().strength(-1000))//设置斥力\n        .force(\"center\",d3.forceCenter())//设置力学仿真器的中心\n        .alphaDecay(0.03)//设置 alpha 衰减率.迭代150，默认0.0228\n        .force(\"collision\",d3.forceCollide(20)) //设置节点碰撞半径,避免重叠\n        \n\n    //从这里开始初始化力导向图，也就是传入数据\n    //生成节点数据\n    forceSimulation.nodes(this.state.nodes)\n        .on(\"tick\",ticked);\n\n    //生成边集数据\n    forceSimulation.force(\"link\")\n    \t\t.links(this.state.edges)\n    \t\t.distance(function(d){//每一边的长度\n    \t\t\treturn d.value*170;\n        }) \n        \n    //设置图形的中心位置\t\n    forceSimulation.force(\"center\")\n        .x(width/2)\n        .y(height/2);\n\n    // defs  <defs>标签的内容不会显示，只有调用的时候才显示\n    const defs=g.append('defs');\n    //添加箭头\n    const arrowMarker = defs.append('marker')\n      .attr('id', 'arrow')\n      .attr('markerUnits', 'strokeWidth')\n      .attr('markerWidth', '15')\n      .attr('markerHeight', '18')\n      .attr('viewBox', '0 0 12 12')\n      .attr('refX', '30')\n      .attr('refY', '6')\n      .attr('orient', 'auto');\n\n    const arrow_path = 'M2,2 L10,6 L2,10 L6,6 L2,2';\n    /* M 2,2 – 把笔落下，放在2,2处\n      L 10,6 – 从起点2 2出发绘制一条直线到10,6处\n      L 2,10 – 从起点10,6出发绘制一条直线到L2,10处\n      L 6,6 – 从起点2,10出发绘制一条直线到L6,6处\n      L L2,2 – 从起点6,6出发绘制一条直线到L2,2处*/\n\n    arrowMarker.append('path')\n      .attr('d', arrow_path)\n      .attr('fill', '#999');   \n\n    //得到节点和边数据后开始绘制边。因为d3各元素有层级关系，先绘制的在下面，所以应该先绘制边\n    const links = g.append('g')   \t\t\n          .selectAll(\"line\")    \t\t\n          .data(this.state.edges)    \t\t\n          .enter()    \t\t\n          .append(\"line\")    \t\t\n          /* .attr(\"stroke\",function(d,i){    \t\t\t\n            return colorScale(i);    \t\t\n          }) */    \t\t\n          .attr(\"strokewidth\",1) \n          .attr('stroke','#fff')\n          .attr('stroke-dasharray', 3, 2)\n          .attr('marker-end', 'url(#arrow)')\n\n      //建立用来放在每个节点和对应文字的分组<g>\n    const gs = g.selectAll(\".circleText\")    \t\t\n          .data(this.state.nodes)    \t\t\n          .enter()    \t\t\n          .append(\"g\")\n          .on('click',(d,i)=>{\n            console.log(d)\n          })    \t\t\n          /* .attr(\"transform\",function(d,i){  \t\t\t\n            let cirX = d.x;    \t\t\t\n            let cirY = d.y;    \t\t\t\n            return \"translate(\"+cirX+\",\"+cirY+\")\";    \t\t\n          })   */  \t\t\n          .call(d3.drag()    \t\t\t\n            .on(\"start\",started)    \t\t\t\n            .on(\"drag\",dragged)    \t\t\t\n            .on(\"end\",ended)    \t\t\n          )\n          \n\n      //绘制节点\n    gs.append(\"circle\")\n          .attr(\"r\",25)\n          .attr('stroke','white')//边框\n          .attr('stroke-width','1.4')//边框宽度\n          .attr('fill',(d,i)=>{\n            const catpattern = defs.attr('id', 'imgdefs').append('pattern')\n              .attr('id', `catpattern${i}`)\n              .attr('height', 3)\n              .attr('width', 3)\n            catpattern.append('image')\n              .attr('x', -14)\n              .attr('y', -12)\n              .attr('width', 95)\n              .attr('height', 90)\n              .attr('xlink:href', d.imgUrl)\n              .attr('transform','scale(0.7)')\n\n          return `url(#catpattern${i})`;\n          })\n          \n      \n      //绘制文字\n    gs.append(\"text\")\n          .attr(\"x\",29)\n          .attr(\"y\",4)\n          .text(d => d.name)\n          .attr('fill','#DED7D6  ')\n          .attr('font-size','12')\n    \n    //添加关系嵌板\n    const panel=g.selectAll(\".relationPanel\")\n      .data(this.state.edges)    \t\t\n      .enter() \n      .append(\"rect\")\n      .attr('class', 'relationPanel')\n      .attr('rx', 10)\n      .attr('ry', 10)\n      .attr('width', 50)\n      .attr('height', 16)\n      .style('fill', '#fff')\n      .style('stroke', '#aaa')\n      \t   \t\t\n\n    //添加relation\n    const panelText=g.selectAll(\".panelText\")\n      .data(this.state.edges)    \t\t\n      .enter()\n      .append('text') \n      .attr('class', 'panelText')\n      .attr(\"x\",5)\n      .attr(\"y\",10)\n      .text(d => d.relation)\n      .attr('fill', '000')\n      .attr('font-size', '8px')\n      .attr('color','#ccc')\n      \n        \n      //ticked函数\n      function ticked(){\n          links\n            .attr(\"x1\",function(d){return d.source.x;})\n            .attr(\"y1\",function(d){return d.source.y;})    \t\t\t\n            .attr(\"x2\",function(d){return d.target.x;})    \t\t\t\n            .attr(\"y2\",function(d){return d.target.y;});    \n\n          gs    \t\t\t\n            .attr(\"transform\",function(d) { \n              return \"translate(\" + d.x + \",\" + d.y + \")\"\n            });  \n\n          panel\n            .attr(\"x\",d=>{return (d.source.x + d.target.x)/2-25})\n            .attr(\"y\",d=>{return (d.source.y + d.target.y)/2-8})\n            .attr(\"transform\",function(d,i) { \n              const lineWidth = Math.sqrt((d.source.x - d.target.x) * (d.source.x - d.target.x) + (d.source.y - d.target.y) * (d.source.y - d.target.y))\n              let angle = Math.floor(Math.acos((d.source.x - d.target.x) / lineWidth) / Math.PI * 180)\n              angle = angle ? (d.source.y < d.target.y) ? -angle : angle : 0\n              return `rotate(${angle},${(d.source.x + d.target.x) / 2},${(d.source.y + d.target.y) / 2})`\n            });\n\n          panelText\n            .attr(\"x\",d=>{return (d.source.x + d.target.x)/2-20})\n            .attr(\"y\",d=>{return (d.source.y + d.target.y)/2+3})\n            .attr(\"transform\",function(d,i) { \n              const lineWidth = Math.sqrt((d.source.x - d.target.x) * (d.source.x - d.target.x) + (d.source.y - d.target.y) * (d.source.y - d.target.y))\n              let angle = Math.floor(Math.asin((d.source.y - d.target.y) / lineWidth) / Math.PI * 180)\n              angle = angle ? (d.source.x < d.target.x) ? -angle : angle : 0\n              return `rotate(${angle},${(d.source.x + d.target.x) / 2},${(d.source.y + d.target.y) / 2})`\n            });\n            \n      }\n\n      //设置拖拽的started、drag、ended函数\n      function started(d){    \t\t\n          if(!d3.event.active){    \t\t\t\n            forceSimulation.alphaTarget(0.7).restart();//设置衰减系数，对节点位置移动过程的模拟，数值越高移动越快，数值范围[0，1]    \t\t\n          }    \t\t\n          d.fx = d.x;    \t\t\n          d.fy = d.y;    \t\n        }    \t\n        function dragged(d){    \t\t\n          d.fx = d3.event.x;    \t\t\n          d.fy = d3.event.y;    \t\n        }    \t\n        function ended(d){    \t\t\n          if(!d3.event.active){    \t\t\t\n            forceSimulation.alphaTarget(0);    \t\t\n          }    \t\t\n          d.fx = null;    \t\t\n          d.fy = null;    \t\n      }\n\n      //缩放函数\n      function zoom_actions() { \n        //限定缩放比例\n        if(d3.event.transform.k >=2){\n          d3.event.transform.k =2\n        }else if(d3.event.transform.k <= 0.6){\n          d3.event.transform.k =0.6\n        }\n\n        //设定拖拽范围\n        if(d3.event.transform.x <=width*-0.5){\n          d3.event.transform.x =width*-0.5\n        }else if(d3.event.transform.x >= width*0.5){\n          d3.event.transform.x = width/2\n        }\n        if(d3.event.transform.y <=height*-0.5){\n          d3.event.transform.y =height*-0.5\n        }else if(d3.event.transform.y >= height*0.5){\n          d3.event.transform.y = height/2\n        }\n        \n        g.attr(\"transform\", d3.event.transform)\n      }\n\n  }\n  render(){\n    return (\n    <div className={this.state.isMobile?Css['mobile']:Css['main']} ref='main'>\n        <svg id=\"svg\" ref='svg'></svg>\n    </div>\n    )\n  }\n}\n\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport DragIndex from './dragIndex/dragIndex';\n//import 'default-passive-events';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.Fragment>\n    <DragIndex />\n  </React.Fragment>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}